# Development Dockerfile for game-core with hot-reload
FROM gradle:8.5-jdk21

WORKDIR /app

# Copy gradle wrapper and build files first for caching
COPY gradle.properties settings.gradle.kts build.gradle.kts ./
COPY gradle ./gradle

# Download dependencies (cached layer)
RUN gradle dependencies --no-daemon || true

# The source code will be mounted via volume
# COPY . .

EXPOSE 80 5050

# Run with continuous build for hot-reload
CMD ["./gradlew", "run", "--continuous", "--no-daemon"]
